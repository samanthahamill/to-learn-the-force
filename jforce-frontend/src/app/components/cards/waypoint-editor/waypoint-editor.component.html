<div class="flex-modal">
  <div clas="custom-table">
    <div class="add-waypoint"></div>
    <div class="table-responsive table-custom">
      <table class="table table-striped table-dark table-hover table-condensed">
        <thead>
          <tr>
            <th scope="col" class="actions">#</th>
            <th scope="col">Lat</th>
            <th scope="col">Lon</th>
            <th scope="col">Altitude</th>
            <th scope="col">Speed</th>
            <th scope="col">Date/Time</th>
            <th scope="col" class="actions">Actions</th>
          </tr>
        </thead>
        <tbody cdkDropList (cdkDropListDropped)="drop($event)">
          <tr>
            <th></th>
            <td>
              <input
                class="input-small"
                id="LatInput"
                type="number"
                [(ngModel)]="latInput"
                required
              />
            </td>
            <td>
              <input
                class="input-small"
                id="LonInput"
                type="number"
                [(ngModel)]="lonInput"
                required
              />
            </td>
            <td>
              <input
                class="input-small"
                id="AltInput"
                type="number"
                [(ngModel)]="altInput"
                required
              />
            </td>
            <td>
              <input
                class="input-small"
                id="SpeedInput"
                type="number"
                [(ngModel)]="speedInput"
                required
              />
            </td>
            <td>
              <input
                class="input-small datetime-dimensions"
                id="datetimeInput"
                type="datetime-local"
                [(ngModel)]="datetimeInput"
                required
              />
            </td>
            <td>
              <fa-icon
                [icon]="addIcon"
                (click)="addWaypoint()"
                title="Add Waypoint"
                [ngClass]="{
                  'icon-button': true,
                  'green-icon': true,
                }"
              ></fa-icon>
            </td>
          </tr>
          <tr
            *ngFor="let waypoint of waypoints; let i = index"
            cdkDrag
            cdkDragLockAxis="y"
          >
            <th class="col-xs">
              <div class="drag-handle">
                <ng-container [ngTemplateOutlet]="dragHandleTmpl">
                </ng-container>
              </div>
            </th>
            <td>
              <input
                class="input-small"
                id="LatInput"
                type="number"
                [(ngModel)]="waypoint.lat"
                required
              />
            </td>
            <td>
              <input
                class="input-small"
                id="LonInput"
                type="number"
                [(ngModel)]="waypoint.lon"
                required
              />
            </td>
            <td>
              <input
                class="input-small"
                id="AltInput"
                type="number"
                [(ngModel)]="waypoint.alt"
              />
            </td>
            <td>
              <input
                class="input-small"
                id="SpeedInput"
                type="number"
                [(ngModel)]="waypoint.speedKts"
                required
              />
            </td>
            <td>
              <input
                class="input-small datetime-dimensions"
                id="datetimeInput"
                type="datetime-local"
                [(ngModel)]="waypoint.datetime"
                required
              />
            </td>
            <td class="actions">
              <div class="table-buttons">
                <fa-icon
                  [icon]="copyIcon"
                  (click)="duplicateWaypoint(i)"
                  title="Duplicate Waypoint"
                  class="icon-button"
                ></fa-icon>
                <fa-icon
                  [icon]="removeIcon"
                  (click)="deleteWaypoint(i)"
                  title="Delete Waypoint"
                  [ngClass]="{
                    'icon-button': true,
                    'red-icon': true,
                  }"
                ></fa-icon>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div
    #mapContainerWaypoints
    id="mapContainerWaypoints"
    class="map-dimensions"
  ></div>
</div>

<ng-template #dragHandleTmpl>
  <svg
    class="bi bi-list handle"
    width="1em"
    height="1em"
    viewBox="0 0 16 16"
    fill="currentColor"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fill-rule="evenodd"
      d="M2.5 11.5A.5.5 0 013 11h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 7h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 3h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5z"
      clip-rule="evenodd"
    />
  </svg>
</ng-template>

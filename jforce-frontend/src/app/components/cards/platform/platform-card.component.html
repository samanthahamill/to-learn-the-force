<app-card header="{{ name }}" [lighterCard]="true" [icons]="icons">
  <form class="formGroup" [formGroup]="platformForm">
    <div class="container">
      <div class="row-1">
        <div class="col">
          <label for="name">Name</label>
          <input
            id="name"
            type="text"
            formControlName="name"
            readonly="readonly"
            class="name"
          />
        </div>
      </div>
      <div class="row-1 three-col">
        <div class="col">
          <label tooltip="Type" for="type">Type</label>
          <select formControlName="type" id="type" size="small">
            <option *ngFor="let option of platformTypeOptions" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
        <div class="col">
          <label for="speed">Speed</label>
          <input
            class="input-small"
            id="speed"
            type="number"
            formControlName="speed"
            readonly="readonly"
          />
        </div>
        <div class="col">
          <label for="reportingFrequency">Reporting Freq</label>
          <input
            class="input-small"
            id="reportingFrequency"
            type="number"
            formControlName="reportingFrequency"
            readonly="readonly"
          />
        </div>
      </div>
      <div class="row-1 table-row">
        <label>Waypoints</label>
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Index</th>
              <th scope="col">Lat</th>
              <th scope="col">Lon</th>
              <th scope="col">Altitude</th>
              <th scope="col">Date/Time</th>
            </tr>
          </thead>
          <tbody cdkDropList (cdkDropListDropped)="drop($event)">
            <tr
              *ngFor="let waypoint of waypoints; let i = index"
              cdkDrag
              cdkDragLockAxis="y"
            >
              <th class="col-xs">
                <div class="drag-handle">
                  <ng-container [ngTemplateOutlet]="dragHandleTmpl">
                  </ng-container>
                  {{ waypoint.index }}
                </div>
              </th>
              <td>{{ waypoint.lat }}</td>
              <td>{{ waypoint.lon }}</td>
              <td>{{ waypoint.alt }}</td>
              <td>{{ waypoint.datetime }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </form>
</app-card>

<ng-template #dragHandleTmpl>
  <svg
    class="bi bi-list handle"
    width="1em"
    height="1em"
    viewBox="0 0 16 16"
    fill="currentColor"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fill-rule="evenodd"
      d="M2.5 11.5A.5.5 0 013 11h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 7h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 3h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5z"
      clip-rule="evenodd"
    />
  </svg>
</ng-template>
